<?xml version="1.0" encoding="UTF-8" ?>
 <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="friendns">
		
	
	<!-- add friend -->
	<insert id="add_friend" parameterType="Map">
		insert into friend_confirm values(#{inviter}, #{invitee},0)
	</insert>
	
	<!-- check friend -->
	<select id="check_friend" parameterType="Map" resultType="friend">
		select * from friendship where email1=#{inviter} and email2=#{invitee}
	</select>
	<select id="check_friendConfirm" parameterType="Map" resultType="friendconfirm">
		select * from friend_confirm where inviter=#{inviter} and invitee=#{invitee} and status=0
	</select>
	<!-- friend list  -->
	<select id="list" parameterType="String" resultType="friend">
		select * from friendship where email1=#{email1}
	</select>
	
	<!-- delete friend -->
	<delete id="del_friend" parameterType="Map">
		delete from friendship where email2=#{email2} and email1=#{email1}
	</delete>
	
	<select id="invite" parameterType="String" resultType="friendconfirm">
		select * from friend_confirm where inviter=#{email} and status=0
	</select>
	<select id="invited" parameterType="String" resultType="friendconfirm">
		select * from friend_confirm where invitee=#{email} and status=0
	</select>
	<update id="accept" parameterType="friendconfirm">
		update friend_confirm set status=#{status}
		where inviter=#{inviter} and invitee=#{invitee}
	</update>
	<select id="recommend" parameterType="String" resultType="friend">
		select * from friendship where email2=#{email}
	</select>
</mapper>
